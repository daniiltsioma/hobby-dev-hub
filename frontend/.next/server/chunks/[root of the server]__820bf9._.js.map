{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrescia/CS554/HobbyDevProj/hobby-dev-hub/frontend/app/api/dummy-db/route.ts"],"sourcesContent":["import { NextRequest } from \"next/server\";\n\nexport interface Project {\n    id: number;\n    title: string;\n    description: string;\n    githubRepoURL: string;\n    applicants: string[];\n}\n\nexport const projects: Project[] = [\n    {\n        id: 1,\n        title: \"Project 1\",\n        description: \"Description of project 1\",\n        githubRepoURL: \"https://github.com/daniiltsioma/pizzashop\",\n        applicants: [],\n    },\n    {\n        id: 2,\n        title: \"Project 2\",\n        description: \"Description of project 2\",\n        githubRepoURL: \"https://github.com/daniiltsioma/pizzashop\",\n        applicants: [],\n    },\n    {\n        id: 3,\n        title: \"Project 3\",\n        description: \"Description of project 3\",\n        githubRepoURL: \"https://github.com/daniiltsioma/pizzashop\",\n        applicants: [],\n    },\n];\n\nexport async function GET() {\n    return Response.json(projects);\n}\n\nexport async function POST(request: Request) {\n    const data = await request.json();\n\n    const project = {\n        id: projects.length + 1,\n        ...data,\n    };\n\n    projects.push(project);\n\n    return Response.json(project);\n}"],"names":[],"mappings":";;;;;AAUO,MAAM,WAAsB;IAC/B;QACI,IAAI;QACJ,OAAO;QACP,aAAa;QACb,eAAe;QACf,YAAY,EAAE;IAClB;IACA;QACI,IAAI;QACJ,OAAO;QACP,aAAa;QACb,eAAe;QACf,YAAY,EAAE;IAClB;IACA;QACI,IAAI;QACJ,OAAO;QACP,aAAa;QACb,eAAe;QACf,YAAY,EAAE;IAClB;CACH;AAEM,eAAe;IAClB,OAAO,SAAS,IAAI,CAAC;AACzB;AAEO,eAAe,KAAK,OAAgB;IACvC,MAAM,OAAO,MAAM,QAAQ,IAAI;IAE/B,MAAM,UAAU;QACZ,IAAI,SAAS,MAAM,GAAG;QACtB,GAAG,IAAI;IACX;IAEA,SAAS,IAAI,CAAC;IAEd,OAAO,SAAS,IAAI,CAAC;AACzB"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrescia/CS554/HobbyDevProj/hobby-dev-hub/frontend/app/lib/dal.ts"],"sourcesContent":["import { cookies } from \"next/headers\";\nimport { Octokit } from \"octokit\";\n\nexport async function getUser() {\n    const cookieStore = await cookies();\n    const accessToken = cookieStore.get(\"accessToken\");\n    if (!accessToken) {\n        return null;\n    }\n\n    try {\n        const octokit = new Octokit({\n            auth: accessToken.value,\n        });\n\n        const user = await octokit.request(\"GET /user\", {\n            headers: {\n                \"X-GitHub-Api-Version\": \"2022-11-28\",\n            },\n        });\n        return user;\n    } catch {\n        return null;\n    }\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD;IAChC,MAAM,cAAc,YAAY,GAAG,CAAC;IACpC,IAAI,CAAC,aAAa;QACd,OAAO;IACX;IAEA,IAAI;QACA,MAAM,UAAU,IAAI,oKAAA,CAAA,UAAO,CAAC;YACxB,MAAM,YAAY,KAAK;QAC3B;QAEA,MAAM,OAAO,MAAM,QAAQ,OAAO,CAAC,aAAa;YAC5C,SAAS;gBACL,wBAAwB;YAC5B;QACJ;QACA,OAAO;IACX,EAAE,OAAM;QACJ,OAAO;IACX;AACJ"}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///Users/loganbrescia/CS554/HobbyDevProj/hobby-dev-hub/frontend/app/api/projects/%5Bid%5D/route.ts"],"sourcesContent":["import { projects } from \"@/app/api/dummy-db/route\";\nimport { cookies } from \"next/headers\";\nimport { getUser } from \"@/app/lib/dal\";\n\nexport async function GET(\n    request: Request,\n    { params }: { params: Promise<{ id: string }> }\n) {\n    const id = Number((await params).id);\n    const project = projects.find((proj) => proj.id === id);\n\n    return Response.json(project);\n}\n\nexport async function POST(\n    request: Request,\n    { params }: { params: Promise<{ id: string }> }\n) {\n    const projectId = Number((await params).id);\n    const project = projects.find((p) => p.id === projectId);\n\n    if (!project) {\n        return Response.json({ error: \"Project not found\" }, { status: 404 });\n    }\n\n    const { cookie } = await request.json();\n    const cookieStore = await cookies();\n    cookieStore.set({\n        name: \"accessToken\",\n        value: cookie.value,\n        expires: new Date(Date.now() + Number(cookie.expires_in)),\n        httpOnly: true,\n        path: \"/\",\n    });\n\n    const applicant = await getUser();\n\n    if (!applicant || !applicant.data?.login) {\n        return Response.json({ error: \"User not authenticated\" }, { status: 401 });\n    }\n\n    if (project.applicants.includes(applicant.data.login)) {\n        return Response.json({ error: \"Already applied\" }, { status: 400 });\n    }\n\n    if (!project.applicants.includes(applicant.data.login)) {\n        project.applicants.push(applicant.data.login);\n    }\n    return Response.json(project, { status: 200 });\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IAClB,OAAgB,EAChB,EAAE,MAAM,EAAuC;IAE/C,MAAM,KAAK,OAAO,CAAC,MAAM,MAAM,EAAE,EAAE;IACnC,MAAM,UAAU,oIAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;IAEpD,OAAO,SAAS,IAAI,CAAC;AACzB;AAEO,eAAe,KAClB,OAAgB,EAChB,EAAE,MAAM,EAAuC;IAE/C,MAAM,YAAY,OAAO,CAAC,MAAM,MAAM,EAAE,EAAE;IAC1C,MAAM,UAAU,oIAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAE9C,IAAI,CAAC,SAAS;QACV,OAAO,SAAS,IAAI,CAAC;YAAE,OAAO;QAAoB,GAAG;YAAE,QAAQ;QAAI;IACvE;IAEA,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,QAAQ,IAAI;IACrC,MAAM,cAAc,MAAM,CAAA,GAAA,iIAAA,CAAA,UAAO,AAAD;IAChC,YAAY,GAAG,CAAC;QACZ,MAAM;QACN,OAAO,OAAO,KAAK;QACnB,SAAS,IAAI,KAAK,KAAK,GAAG,KAAK,OAAO,OAAO,UAAU;QACvD,UAAU;QACV,MAAM;IACV;IAEA,MAAM,YAAY,MAAM,CAAA,GAAA,mHAAA,CAAA,UAAO,AAAD;IAE9B,IAAI,CAAC,aAAa,CAAC,UAAU,IAAI,EAAE,OAAO;QACtC,OAAO,SAAS,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;QAAI;IAC5E;IAEA,IAAI,QAAQ,UAAU,CAAC,QAAQ,CAAC,UAAU,IAAI,CAAC,KAAK,GAAG;QACnD,OAAO,SAAS,IAAI,CAAC;YAAE,OAAO;QAAkB,GAAG;YAAE,QAAQ;QAAI;IACrE;IAEA,IAAI,CAAC,QAAQ,UAAU,CAAC,QAAQ,CAAC,UAAU,IAAI,CAAC,KAAK,GAAG;QACpD,QAAQ,UAAU,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,KAAK;IAChD;IACA,OAAO,SAAS,IAAI,CAAC,SAAS;QAAE,QAAQ;IAAI;AAChD"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}